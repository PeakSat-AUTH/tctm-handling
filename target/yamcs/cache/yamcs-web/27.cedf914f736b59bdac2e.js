(self.webpackChunk_yamcs_webapp=self.webpackChunk_yamcs_webapp||[]).push([[27],{2027:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AlgorithmsModule:()=>Ue});var a=n(7290),i=n(3337),s=n(7102),o=n(4017),r=n(9385),c=n(8293),l=n(5366),u=n(9624),g=n(1116),h=n(9451),p=n(6972),m=n(7173),d=n(3123),f=n(6927);const Z=function(t,e){return{c:t,filter:e}};function x(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"a",8),l._uU(2),l.qZA(),l._uU(3),l.ALo(4,"shortName"),l.BQk()),2&t){const t=e.ngIf,n=l.oxw().ngIf,a=l.oxw();l.xp6(1),l.Q6J("queryParams",l.WLB(5,Z,a.yamcs.context,t)),l.xp6(1),l.hij(" ",t," "),l.xp6(1),l.hij("/",l.lcZ(4,3,n.qualifiedName)," ")}}const y=function(t){return{c:t}};function q(t,e){if(1&t&&(l.TgZ(0,"app-instance-page"),l.TgZ(1,"app-instance-toolbar"),l.YNc(2,x,5,8,"ng-container",0),l.ALo(3,"spaceSystemName"),l.qZA(),l.TgZ(4,"nav",1,2),l.TgZ(6,"a",3,4),l._uU(8," Summary "),l.qZA(),l.TgZ(9,"a",5,6),l._uU(11," Trace "),l.qZA(),l.qZA(),l.TgZ(12,"div",7),l._UZ(13,"router-outlet"),l.qZA(),l.qZA()),2&t){const t=e.ngIf,n=l.MAs(7),a=l.MAs(10),i=l.oxw();l.xp6(2),l.Q6J("ngIf",l.lcZ(3,6,t.qualifiedName)),l.xp6(4),l.Q6J("active",n.isActive)("queryParams",l.VKq(8,y,i.yamcs.context)),l.xp6(3),l.Q6J("active",a.isActive)("queryParams",l.VKq(10,y,i.yamcs.context))("disabled","GLOBAL"!==t.scope)}}let A=(()=>{class t{constructor(t,e,n){this.yamcs=e;const a=t.snapshot.paramMap.get("qualifiedName");this.algorithm$=e.yamcsClient.getAlgorithm(this.yamcs.instance,a),this.algorithm$.then(t=>{n.setTitle(t.name)})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(i.gz),l.Y36(c.C),l.Y36(u.Dx))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-tab-nav-bar",""],["tabs",""],["mat-tab-link","","routerLink","summary","routerLinkActive","",3,"active","queryParams"],["rla","routerLinkActive"],["mat-tab-link","","routerLink","trace","routerLinkActive","",3,"active","queryParams","disabled"],["rlb","routerLinkActive"],[1,"tab-content-wrapper"],["routerLink","/algorithms",1,"ya-link","ya-header-link",3,"queryParams"]],template:function(t,e){1&t&&(l.YNc(0,q,14,12,"app-instance-page",0),l.ALo(1,"async")),2&t&&l.Q6J("ngIf",l.lcZ(1,1,e.algorithm$))},directives:[g.O5,h.a,p.k,m.BU,i.yS,m.Nj,i.Od,i.lC],pipes:[g.Ov,d.B,f.y],styles:[".tab-content-wrapper[_ngcontent-%COMP%]{position:absolute;top:49px;left:0;right:0;bottom:0;overflow:auto}.tab-content-wrapper.noscroll[_ngcontent-%COMP%]{overflow:hidden}"],changeDetection:0}),t})();var T=n(8378),_=n(1041),w=n(5609),U=n(8512);class b extends T.o2{constructor(t){super(),this.yamcs=t,this.items$=new U.X([]),this.totalSize$=new U.X(0),this.loading$=new U.X(!1)}connect(){return this.items$}loadAlgorithms(t){return this.loading$.next(!0),this.yamcs.yamcsClient.getAlgorithms(this.yamcs.instance,t).then(t=>{this.loading$.next(!1),this.totalSize$.next(t.totalSize);const e=[];for(const n of t.spaceSystems||[])e.push({spaceSystem:!0,name:n});for(const n of t.algorithms||[])e.push({spaceSystem:!1,name:n.qualifiedName,algorithm:n});this.items$.next(e)})}disconnect(){this.items$.complete(),this.totalSize$.complete(),this.loading$.complete()}}var v=n(8784),N=n(808),Q=n(2679),I=n(3061),J=n(7340),O=n(7307),S=n(4580),C=n(1576);const Y=["top"];function k(t,e){if(1&t&&l._UZ(0,"app-breadcrumb",13),2&t){const t=e.$implicit;l.Q6J("link",t.route)("queryParams",t.queryParams)("label",t.name)}}const P=function(t){return{c:t}};function M(t,e){if(1&t&&(l.TgZ(0,"div",4),l.TgZ(1,"app-breadcrumb-trail"),l._UZ(2,"app-breadcrumb",11),l.YNc(3,k,1,3,"app-breadcrumb",12),l.qZA(),l.qZA()),2&t){const t=l.oxw().ngIf,e=l.oxw();l.xp6(2),l.Q6J("queryParams",l.VKq(2,P,e.yamcs.context)),l.xp6(1),l.Q6J("ngForOf",t)}}function $(t,e){if(1&t&&(l.ynx(0),l.YNc(1,M,4,4,"div",10),l.BQk()),2&t){const t=e.ngIf;l.xp6(1),l.Q6J("ngIf",t.length)}}function D(t,e){1&t&&(l.TgZ(0,"th",27),l._uU(1,"Name"),l.qZA())}const L=function(){return["/algorithms"]},B=function(t,e){return{c:t,system:e}};function E(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"mat-icon",29),l._uU(2,"folder"),l.qZA(),l.TgZ(3,"a",30),l._uU(4),l.ALo(5,"filename"),l.qZA(),l.BQk()),2&t){const t=l.oxw().$implicit,e=l.oxw(2);l.xp6(3),l.Q6J("routerLink",l.DdM(5,L))("queryParams",l.WLB(6,B,e.yamcs.context,t.name)),l.xp6(1),l.hij(" ",l.lcZ(5,3,t.name),"/ ")}}function z(t,e){if(1&t&&l._UZ(0,"app-highlight",32),2&t){const t=l.oxw(2).$implicit,e=l.oxw(2);l.Q6J("text",t.algorithm.qualifiedName)("term",e.filterForm.value.filter)}}function V(t,e){if(1&t&&(l._UZ(0,"app-highlight",32),l.ALo(1,"slice")),2&t){const t=l.oxw(2).$implicit,e=l.oxw(2);l.Q6J("text",l.xi3(1,2,t.algorithm.qualifiedName,e.system.length+1))("term",e.filterForm.value.filter)}}const F=function(t){return["/algorithms",t]};function H(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"mat-icon",29),l._uU(2,"transform"),l.qZA(),l.TgZ(3,"a",30),l.YNc(4,z,1,2,"app-highlight",31),l.YNc(5,V,2,5,"app-highlight",31),l.qZA(),l.BQk()),2&t){const t=l.oxw().$implicit,e=l.oxw(2);l.xp6(3),l.Q6J("routerLink",l.VKq(4,F,t.algorithm.qualifiedName))("queryParams",l.VKq(6,P,e.yamcs.context)),l.xp6(1),l.Q6J("ngIf",!e.system),l.xp6(1),l.Q6J("ngIf",e.system)}}function R(t,e){if(1&t&&(l.TgZ(0,"td",28),l.YNc(1,E,6,9,"ng-container",3),l.YNc(2,H,6,8,"ng-container",3),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Q6J("ngIf",t.spaceSystem),l.xp6(1),l.Q6J("ngIf",!t.spaceSystem)}}function j(t,e){1&t&&(l.TgZ(0,"th",33),l._uU(1,"Language"),l.qZA())}function X(t,e){if(1&t&&(l.TgZ(0,"td",34),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Oqu((null==t.algorithm?null:t.algorithm.language)||"-")}}function K(t,e){1&t&&(l.TgZ(0,"th",35),l._uU(1,"Scope"),l.qZA())}function G(t,e){if(1&t&&(l.TgZ(0,"td",34),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Oqu((null==t.algorithm?null:t.algorithm.scope)||"-")}}function W(t,e){1&t&&(l.TgZ(0,"th",36),l._uU(1,"Description"),l.qZA())}function tt(t,e){if(1&t&&(l.TgZ(0,"td",34),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Oqu((null==t.algorithm?null:t.algorithm.shortDescription)||"-")}}function et(t,e){1&t&&l._UZ(0,"tr",37)}function nt(t,e){if(1&t&&l._UZ(0,"tr",38),2&t){const t=e.$implicit,n=l.oxw(2);l.ekj("selected",n.selection.isSelected(t))}}function at(t,e){if(1&t&&(l.TgZ(0,"table",14),l.ynx(1,15),l.YNc(2,D,2,0,"th",16),l.YNc(3,R,3,2,"td",17),l.BQk(),l.ynx(4,18),l.YNc(5,j,2,0,"th",19),l.YNc(6,X,2,1,"td",20),l.BQk(),l.ynx(7,21),l.YNc(8,K,2,0,"th",22),l.YNc(9,G,2,1,"td",20),l.BQk(),l.ynx(10,23),l.YNc(11,W,2,0,"th",24),l.YNc(12,tt,2,1,"td",20),l.BQk(),l.YNc(13,et,1,0,"tr",25),l.YNc(14,nt,1,2,"tr",26),l.qZA()),2&t){const t=l.oxw();l.Q6J("dataSource",t.dataSource),l.xp6(13),l.Q6J("matHeaderRowDef",t.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",t.displayedColumns)}}function it(t,e){if(1&t&&(l.TgZ(0,"div",1),l._uU(1," The Mission Database for "),l.TgZ(2,"i"),l._uU(3),l.qZA(),l._uU(4," does not define any algorithms. "),l.qZA()),2&t){const t=l.oxw();l.xp6(3),l.Oqu(t.yamcs.instance)}}let st=(()=>{class t{constructor(t,e,n,a){this.yamcs=t,this.route=n,this.router=a,this.filterForm=new _.cw({filter:new _.NI,scope:new _.NI("ANY")}),this.shortName=!1,this.pageSize=100,this.system=null,this.breadcrumb$=new U.X([]),this.displayedColumns=["name","language","scope","shortDescription"],this.scopeOptions=[{id:"ANY",label:"Any scope"},{id:"GLOBAL",label:"Global"},{id:"COMMAND_VERIFICATION",label:"Command Verification"},{id:"CONTAINER_PROCESSING",label:"Container Processing"}],this.selection=new T.Ov(!1),e.setTitle("Algorithms"),this.dataSource=new b(t)}ngAfterViewInit(){const t=this.route.snapshot.queryParamMap;t.has("filter")&&(this.filter=t.get("filter")||"",this.filterForm.get("filter").setValue(this.filter)),t.has("scope")&&(this.scope=t.get("scope"),this.filterForm.get("scope").setValue(this.scope)),this.filterForm.get("filter").valueChanges.subscribe(t=>{this.paginator.pageIndex=0,this.filter=t,this.updateDataSource()}),this.filterForm.get("scope").valueChanges.forEach(t=>{this.scope="ANY"!==t?t:null,this.updateDataSource()}),this.changeSystem(this.route.snapshot.queryParamMap),this.queryParamMapSubscription=this.route.queryParamMap.subscribe(t=>{t.get("system")!==this.system&&this.changeSystem(t)}),this.paginator.page.subscribe(()=>{this.updateDataSource(),this.top.nativeElement.scrollIntoView()})}changeSystem(t){this.system=t.get("system"),this.updateBrowsePath(),this.paginator.pageIndex=t.has("page")?Number(t.get("page")):0,this.updateDataSource()}updateDataSource(){this.updateURL();const t={system:this.system||"/",pos:this.paginator.pageIndex*this.pageSize,limit:this.pageSize};this.filter&&(t.q=this.filter),this.scope&&(t.scope=this.scope),this.dataSource.loadAlgorithms(t).then(()=>{this.selection.clear(),this.updateBrowsePath()})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{page:this.paginator.pageIndex||null,filter:this.filter||null,scope:this.scope||null,system:this.system||null},queryParamsHandling:"merge"})}updateBrowsePath(){const t=[];let e="";if(this.system)for(const n of this.system.slice(1).split("/"))e+="/"+n,t.push({name:n,route:"/algorithms",queryParams:{system:e,c:this.yamcs.context}});this.breadcrumb$.next(t)}selectNext(){const t=this.dataSource.items$.value;let e=0;if(this.selection.hasValue()){const n=this.selection.selected[0];-1!==t.indexOf(n)&&(e=Math.min(t.indexOf(n)+1,t.length-1))}this.selection.select(t[e])}selectPrevious(){const t=this.dataSource.items$.value;let e=0;if(this.selection.hasValue()){const n=this.selection.selected[0];-1!==t.indexOf(n)&&(e=Math.max(t.indexOf(n)-1,0))}this.selection.select(t[e])}applySelection(){var t;if(this.selection.hasValue()){const e=this.selection.selected[0];-1!==this.dataSource.items$.value.indexOf(e)&&this.router.navigate(["/algorithms",null===(t=e.algorithm)||void 0===t?void 0:t.qualifiedName],{queryParams:{c:this.yamcs.context}})}}ngOnDestroy(){this.queryParamMapSubscription&&this.queryParamMapSubscription.unsubscribe(),this.dataSource.disconnect()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(c.C),l.Y36(u.Dx),l.Y36(i.gz),l.Y36(i.F0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Y,7),l.Gf(w.NW,7)),2&t){let t;l.iGM(t=l.CRH())&&(e.top=t.first),l.iGM(t=l.CRH())&&(e.paginator=t.first)}},decls:17,vars:13,consts:[["top",""],[1,"panel-content"],[3,"formGroup"],[4,"ngIf"],[1,"filter-bar"],["placeholder","Search by name","icon","search",3,"formControl","onArrowDown","onArrowUp","onEnter"],["formControlName","scope",3,"options"],["mat-table","","class","ya-data-table","style","width: 100%",3,"dataSource",4,"ngIf"],[3,"pageSize","hidePageSize","showFirstLastButtons","length"],["empty",""],["class","filter-bar",4,"ngIf"],["link","/algorithms","icon","account_tree",3,"queryParams"],[3,"link","queryParams","label",4,"ngFor","ngForOf"],[3,"link","queryParams","label"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","style","width: 400px",4,"matHeaderCellDef"],["mat-cell","","class","primary-td",4,"matCellDef"],["matColumnDef","language"],["mat-header-cell","","style","width: 100px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","scope"],["mat-header-cell","","style","width: 200px",4,"matHeaderCellDef"],["matColumnDef","shortDescription"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"width","400px"],["mat-cell","",1,"primary-td"],[1,"icon12",2,"vertical-align","middle"],[3,"routerLink","queryParams"],[3,"text","term",4,"ngIf"],[3,"text","term"],["mat-header-cell","",2,"width","100px"],["mat-cell",""],["mat-header-cell","",2,"width","200px"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.TgZ(0,"app-instance-page"),l.TgZ(1,"app-instance-toolbar"),l._uU(2," Algorithms "),l.qZA(),l._UZ(3,"span",null,0),l.TgZ(5,"div",1),l.TgZ(6,"form",2),l.YNc(7,$,2,1,"ng-container",3),l.ALo(8,"async"),l.TgZ(9,"div",4),l.TgZ(10,"app-search-filter",5),l.NdJ("onArrowDown",function(){return e.selectNext()})("onArrowUp",function(){return e.selectPrevious()})("onEnter",function(){return e.applySelection()}),l.qZA(),l._UZ(11,"app-select",6),l.qZA(),l.qZA(),l.YNc(12,at,15,3,"table",7),l._UZ(13,"mat-paginator",8),l.ALo(14,"async"),l.qZA(),l.YNc(15,it,5,1,"ng-template",null,9,l.W1O),l.qZA()),2&t&&(l.xp6(6),l.Q6J("formGroup",e.filterForm),l.xp6(1),l.Q6J("ngIf",l.lcZ(8,9,e.breadcrumb$)),l.xp6(3),l.Q6J("formControl",e.filterForm.controls.filter),l.xp6(1),l.Q6J("options",e.scopeOptions),l.xp6(1),l.Q6J("ngIf",e.dataSource),l.xp6(1),l.Q6J("pageSize",e.pageSize)("hidePageSize",!0)("showFirstLastButtons",!0)("length",l.lcZ(14,11,e.dataSource.totalSize$)))},directives:[h.a,p.k,_._Y,_.JL,_.sg,g.O5,v.a,_.JJ,_.oH,N.P,_.u,w.NW,Q.w,I.a,g.sg,J.BZ,J.w1,J.fO,J.Dz,J.as,J.nj,J.ge,J.ev,O.Hw,i.yS,S.y,J.XQ,J.Gk],pipes:[g.Ov,C.X,g.OU],styles:[".primary-td[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:7px}"],changeDetection:0}),t})();var ot=n(9821),rt=(n(296),n(6769),n(9125),n(3782),n(8561)),ct=n(2420),lt=n(6278),ut=n(7433),gt=n(5700),ht=n(6998);function pt(t,e){if(1&t&&l._UZ(0,"app-led",2),2&t){const t=l.oxw();l.Q6J("color",t.onColor)("fade",!1)("width",t.size)("height",t.size)}}function mt(t,e){if(1&t&&l._UZ(0,"app-led",3),2&t){const t=l.oxw();l.Q6J("fade",!1)("width",t.size)("height",t.size)}}let dt=(()=>{class t{constructor(){this.size=14,this.onColor=ht.U3,this.offColor=ht.fk}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-algorithm-status"]],inputs:{status:"status",size:"size"},decls:2,vars:2,consts:[[3,"color","fade","width","height",4,"ngIf"],["color","red",3,"fade","width","height",4,"ngIf"],[3,"color","fade","width","height"],["color","red",3,"fade","width","height"]],template:function(t,e){1&t&&(l.YNc(0,pt,1,4,"app-led",0),l.YNc(1,mt,1,3,"app-led",1)),2&t&&(l.Q6J("ngIf",!e.status.errorMessage),l.xp6(1),l.Q6J("ngIf",e.status.errorMessage))},directives:[g.O5,ht.on],styles:["[_nghost-%COMP%]{line-height:0;font-size:0}"],changeDetection:0}),t})();var ft=n(1430),Zt=n(9543),xt=n(487);const yt=["text"],qt=function(t,e){return{c:t,filter:e}};function At(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"a",10),l._uU(2),l.qZA(),l.BQk()),2&t){const t=e.ngIf,n=l.oxw();l.xp6(1),l.Q6J("queryParams",l.WLB(2,qt,n.yamcs.context,t)),l.xp6(1),l.hij(" ",t," ")}}function Tt(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"dt"),l._uU(2),l.qZA(),l.TgZ(3,"dd"),l._uU(4),l.qZA(),l.BQk()),2&t){const t=e.$implicit;l.xp6(2),l.Oqu(t.namespace),l.xp6(2),l.Oqu(t.name)}}function _t(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"dt"),l._uU(2,"Description"),l.qZA(),l.TgZ(3,"dd"),l._UZ(4,"app-markdown",11),l.qZA(),l.BQk()),2&t){const t=l.oxw();l.xp6(4),l.Q6J("text",t.algorithm.longDescription)}}function wt(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"dt"),l._uU(2,"Description"),l.qZA(),l.TgZ(3,"dd"),l._uU(4),l.qZA(),l.BQk()),2&t){const t=l.oxw();l.xp6(4),l.hij(" ",t.algorithm.shortDescription||"-"," ")}}function Ut(t,e){1&t&&(l.ynx(0),l._uU(1,"OK"),l.BQk())}function bt(t,e){if(1&t&&(l.ynx(0),l._uU(1),l.BQk()),2&t){const t=l.oxw(2);l.xp6(1),l.Oqu(t.status.errorMessage)}}function vt(t,e){if(1&t&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"nanosDuration"),l.qZA()),2&t){const t=l.oxw(2);l.xp6(1),l.hij(" ",l.lcZ(2,1,t.status.execTimeNs/t.status.runCount)," ")}}function Nt(t,e){1&t&&(l.TgZ(0,"span"),l._uU(1,"-"),l.qZA())}function Qt(t,e){if(1&t&&(l.ynx(0),l._UZ(1,"mat-divider"),l.TgZ(2,"dl",3),l.TgZ(3,"dt"),l._uU(4,"Status"),l.qZA(),l.TgZ(5,"dd",12),l._UZ(6,"app-algorithm-status",13),l._uU(7,"\xa0 "),l.YNc(8,Ut,2,0,"ng-container",1),l.YNc(9,bt,2,1,"ng-container",1),l.qZA(),l.TgZ(10,"dt"),l._uU(11,"Run count"),l.qZA(),l.TgZ(12,"dd"),l._uU(13),l.ALo(14,"number"),l.qZA(),l.TgZ(15,"dt"),l._uU(16,"Total run time"),l.qZA(),l.TgZ(17,"dd"),l._uU(18),l.ALo(19,"nanosDuration"),l.qZA(),l.TgZ(20,"dt"),l._uU(21,"Average run time"),l.qZA(),l.TgZ(22,"dd"),l.YNc(23,vt,3,3,"span",1),l.YNc(24,Nt,2,0,"span",1),l.qZA(),l.TgZ(25,"dt"),l._uU(26,"Last run"),l.qZA(),l.TgZ(27,"dd"),l._uU(28),l.ALo(29,"datetime"),l.qZA(),l.qZA(),l.BQk()),2&t){const t=l.oxw();l.xp6(6),l.Q6J("status",t.status),l.xp6(2),l.Q6J("ngIf",!t.status.errorMessage),l.xp6(1),l.Q6J("ngIf",t.status.errorMessage),l.xp6(4),l.Oqu(l.lcZ(14,8,t.status.runCount)||"-"),l.xp6(5),l.hij(" ",l.lcZ(19,10,t.status.execTimeNs)||"-"," "),l.xp6(5),l.Q6J("ngIf",t.status.runCount),l.xp6(1),l.Q6J("ngIf",!t.status.runCount),l.xp6(4),l.Oqu(l.lcZ(29,12,t.status.lastRun)||"-")}}function It(t,e){1&t&&(l.TgZ(0,"app-help"),l._uU(1," You may override the MDB algorithm text. Such a change is scoped to the current processor only and will not persist across server restarts. "),l.qZA())}function Jt(t,e){1&t&&(l.TgZ(0,"span",14),l._uU(1," MDB Override "),l.qZA())}function Ot(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",15),l.TgZ(1,"button",16),l.NdJ("click",function(){return l.CHM(t),l.oxw().saveTextChanges()}),l.ALo(2,"async"),l.TgZ(3,"mat-icon"),l._uU(4,"save"),l.qZA(),l._uU(5," Save "),l.qZA(),l.TgZ(6,"button",17),l.NdJ("click",function(){return l.CHM(t),l.oxw().revertText()}),l.ALo(7,"async"),l.TgZ(8,"mat-icon"),l._uU(9,"undo"),l.qZA(),l._uU(10," Restore MDB text "),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();let e;l.xp6(1),l.Q6J("disabled",!l.lcZ(2,2,t.dirty$)),l.xp6(5),l.Q6J("disabled",!(null!=(e=l.lcZ(7,4,t.overrides$))&&e.textOverride))}}function St(t,e){1&t&&(l.TgZ(0,"mat-icon"),l._uU(1,"check"),l.qZA())}function Ct(t,e){1&t&&(l.TgZ(0,"mat-icon"),l._uU(1,"close"),l.qZA())}const Yt=function(t){return["/telemetry/parameters/",t]},kt=function(t){return{c:t}};function Pt(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l.TgZ(4,"a",18),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"td",19),l._uU(7),l.qZA(),l.TgZ(8,"td",19),l.YNc(9,St,2,0,"mat-icon",1),l.YNc(10,Ct,2,0,"mat-icon",1),l.qZA(),l.qZA()),2&t){const t=e.$implicit,n=l.oxw(2);l.xp6(2),l.Oqu(t.inputName),l.xp6(2),l.Q6J("routerLink",l.VKq(7,Yt,t.parameter.qualifiedName))("queryParams",l.VKq(9,kt,n.yamcs.context)),l.xp6(1),l.hij(" ",t.parameter.qualifiedName," "),l.xp6(2),l.hij(" ",t.parameterInstance," "),l.xp6(2),l.Q6J("ngIf",t.mandatory),l.xp6(1),l.Q6J("ngIf",!t.mandatory)}}function Mt(t,e){if(1&t&&(l.TgZ(0,"table",9),l.TgZ(1,"tr"),l.TgZ(2,"th"),l._uU(3,"Input Name"),l.qZA(),l.TgZ(4,"th"),l._uU(5,"Parameter"),l.qZA(),l.TgZ(6,"th"),l._uU(7,"Instance"),l.qZA(),l.TgZ(8,"th"),l._uU(9,"Mandatory"),l.qZA(),l.qZA(),l.YNc(10,Pt,11,11,"tr",2),l.qZA()),2&t){const t=l.oxw();l.xp6(10),l.Q6J("ngForOf",t.algorithm.inputParameter)}}function $t(t,e){1&t&&(l.TgZ(0,"span"),l._uU(1,"-"),l.qZA())}function Dt(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l.TgZ(4,"a",18),l._uU(5),l.qZA(),l.qZA(),l.qZA()),2&t){const t=e.$implicit,n=l.oxw(2);l.xp6(2),l.Oqu(t.outputName),l.xp6(2),l.Q6J("routerLink",l.VKq(4,Yt,t.parameter.qualifiedName))("queryParams",l.VKq(6,kt,n.yamcs.context)),l.xp6(1),l.hij(" ",t.parameter.qualifiedName," ")}}function Lt(t,e){if(1&t&&(l.TgZ(0,"table",9),l.TgZ(1,"tr"),l.TgZ(2,"th"),l._uU(3,"Output Name"),l.qZA(),l.TgZ(4,"th"),l._uU(5,"Parameter"),l.qZA(),l.qZA(),l.YNc(6,Dt,6,8,"tr",2),l.qZA()),2&t){const t=l.oxw();l.xp6(6),l.Q6J("ngForOf",t.algorithm.outputParameter)}}function Bt(t,e){1&t&&(l.TgZ(0,"span"),l._uU(1,"-"),l.qZA())}function Et(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2,"OnParameterUpdate"),l.qZA(),l.TgZ(3,"td"),l.TgZ(4,"a",18),l._uU(5),l.qZA(),l.qZA(),l.qZA()),2&t){const t=e.$implicit,n=l.oxw();l.xp6(4),l.Q6J("routerLink",l.VKq(3,Yt,t.qualifiedName))("queryParams",l.VKq(5,kt,n.yamcs.context)),l.xp6(1),l.hij(" ",t.qualifiedName," ")}}function zt(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2,"OnPeriodicRate"),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(4),l.hij("",t.algorithm.onPeriodicRate," ms")}}let Vt=(()=>{class t{constructor(t,e,n,a){this.route=t,this.yamcs=e,this.messageService=n,this.authService=a,this.overrides$=new U.X(null),this.dirty$=new U.X(!1)}ngAfterViewInit(){this.initializeEditor(),this.refreshOverrides()}isChangeMissionDatabaseEnabled(){return this.authService.getUser().hasSystemPrivilege("ChangeMissionDatabase")}initializeEditor(){switch(this.editor=ot.edit(this.textContainer.nativeElement),this.editor.$blockScrolling=1/0,this.isChangeMissionDatabaseEnabled()?this.editor.addEventListener("change",()=>{this.dirty$.next(!0)}):this.editor.setReadOnly(!0),this.algorithm.language.toLowerCase()){case"javascript":this.editor.getSession().setMode("ace/mode/javascript");break;case"python":this.editor.getSession().setMode("ace/mode/python");break;default:console.warn(`Unexpected language ${this.algorithm.language}`)}this.editor.setTheme("ace/theme/eclipse")}refreshOverrides(){const t=this.route.parent.snapshot.paramMap.get("qualifiedName");this.yamcs.yamcsClient.getAlgorithmOverrides(this.yamcs.instance,this.yamcs.processor,t).then(t=>{this.overrides$.next(t),this.updateEditorValue(t.textOverride?t.textOverride.text:this.algorithm.text)}).catch(t=>this.messageService.showError(t))}updateEditorValue(t){this.editor.session.setValue(t),this.dirty$.next(!1)}saveTextChanges(){const t=this.editor.getSession().getValue();this.yamcs.yamcsClient.updateAlgorithmText(this.yamcs.instance,this.yamcs.processor,this.algorithm.qualifiedName,t).then(()=>this.refreshOverrides()).catch(t=>this.messageService.showError(t))}revertText(){this.yamcs.yamcsClient.revertAlgorithmText(this.yamcs.instance,this.yamcs.processor,this.algorithm.qualifiedName).then(()=>this.refreshOverrides()).catch(t=>this.messageService.showError(t))}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(i.gz),l.Y36(c.C),l.Y36(ct.e),l.Y36(rt.e))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-algorithm-detail"]],viewQuery:function(t,e){if(1&t&&l.Gf(yt,7),2&t){let t;l.iGM(t=l.CRH())&&(e.textContainer=t.first)}},inputs:{algorithm:"algorithm",status:"status"},decls:64,vars:23,consts:[[1,"dl-horizontal","no-lead"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"dl-horizontal"],["class","override-annotation",4,"ngIf"],["style","padding-bottom: 5px",4,"ngIf"],[1,"algorithm-text"],["text",""],["yaDataTable","",4,"ngIf"],["yaDataTable",""],["routerLink","/algorithms",1,"ya-link",3,"queryParams"],[3,"text"],[2,"display","flex","align-items","center"],[3,"status"],[1,"override-annotation"],[2,"padding-bottom","5px"],[1,"ya-button",2,"margin-right","5px",3,"disabled","click"],[1,"ya-button",3,"disabled","click"],[3,"routerLink","queryParams"],[2,"text-align","center"]],template:function(t,e){if(1&t&&(l.TgZ(0,"dl",0),l.TgZ(1,"dt"),l._uU(2,"Algorithm"),l.qZA(),l.TgZ(3,"dd"),l._uU(4),l.ALo(5,"shortName"),l.qZA(),l.TgZ(6,"dt"),l._uU(7,"Space System"),l.qZA(),l.TgZ(8,"dd"),l.YNc(9,At,3,5,"ng-container",1),l.ALo(10,"spaceSystemName"),l.qZA(),l.YNc(11,Tt,5,2,"ng-container",2),l.YNc(12,_t,5,1,"ng-container",1),l.YNc(13,wt,5,1,"ng-container",1),l.qZA(),l._UZ(14,"mat-divider"),l.TgZ(15,"dl",3),l.TgZ(16,"dt"),l._uU(17,"Scope"),l.qZA(),l.TgZ(18,"dd"),l._uU(19),l.qZA(),l.TgZ(20,"dt"),l._uU(21,"Language"),l.qZA(),l.TgZ(22,"dd"),l._uU(23),l.qZA(),l.qZA(),l.YNc(24,Qt,30,14,"ng-container",1),l._UZ(25,"mat-divider"),l.TgZ(26,"dl",3),l.TgZ(27,"dt"),l._uU(28," Text "),l.YNc(29,It,2,0,"app-help",1),l._UZ(30,"br"),l.YNc(31,Jt,2,0,"span",4),l.ALo(32,"async"),l.qZA(),l.TgZ(33,"dd"),l.YNc(34,Ot,11,6,"div",5),l._UZ(35,"div",6,7),l.qZA(),l.qZA(),l._UZ(37,"mat-divider"),l.TgZ(38,"dl",3),l.TgZ(39,"dt"),l._uU(40,"Input Parameters"),l.qZA(),l.TgZ(41,"dd"),l.YNc(42,Mt,11,1,"table",8),l.YNc(43,$t,2,0,"span",1),l.qZA(),l.qZA(),l._UZ(44,"mat-divider"),l.TgZ(45,"dl",3),l.TgZ(46,"dt"),l._uU(47,"Output Parameters"),l.qZA(),l.TgZ(48,"dd"),l.YNc(49,Lt,7,1,"table",8),l.YNc(50,Bt,2,0,"span",1),l.qZA(),l.qZA(),l._UZ(51,"mat-divider"),l.TgZ(52,"dl",3),l.TgZ(53,"dt"),l._uU(54,"Triggers"),l.qZA(),l.TgZ(55,"dd"),l.TgZ(56,"table",9),l.TgZ(57,"tr"),l.TgZ(58,"th"),l._uU(59,"Type"),l.qZA(),l.TgZ(60,"th"),l._uU(61,"Value"),l.qZA(),l.qZA(),l.YNc(62,Et,6,7,"tr",2),l.YNc(63,zt,5,1,"tr",1),l.qZA(),l.qZA(),l.qZA()),2&t){let t;l.xp6(4),l.Oqu(l.lcZ(5,17,e.algorithm.qualifiedName)),l.xp6(5),l.Q6J("ngIf",l.lcZ(10,19,e.algorithm.qualifiedName)),l.xp6(2),l.Q6J("ngForOf",e.algorithm.alias),l.xp6(1),l.Q6J("ngIf",e.algorithm.longDescription),l.xp6(1),l.Q6J("ngIf",!e.algorithm.longDescription),l.xp6(6),l.Oqu(e.algorithm.scope||"-"),l.xp6(4),l.Oqu(e.algorithm.language||"-"),l.xp6(1),l.Q6J("ngIf",e.status&&"GLOBAL"===e.algorithm.scope),l.xp6(5),l.Q6J("ngIf",e.isChangeMissionDatabaseEnabled()),l.xp6(2),l.Q6J("ngIf",null==(t=l.lcZ(32,21,e.overrides$))?null:t.textOverride),l.xp6(3),l.Q6J("ngIf",e.isChangeMissionDatabaseEnabled()),l.xp6(8),l.Q6J("ngIf",e.algorithm.inputParameter),l.xp6(1),l.Q6J("ngIf",!e.algorithm.inputParameter),l.xp6(6),l.Q6J("ngIf",e.algorithm.outputParameter),l.xp6(1),l.Q6J("ngIf",!e.algorithm.outputParameter),l.xp6(12),l.Q6J("ngForOf",e.algorithm.onParameterUpdate),l.xp6(1),l.Q6J("ngIf",e.algorithm.onPeriodicRate)}},directives:[g.O5,g.sg,lt.d,ut.O,i.yS,gt.U,dt,ft.W,O.Hw],pipes:[f.y,d.B,g.Ov,g.JJ,Zt.B,xt.i],styles:["code[_ngcontent-%COMP%]{display:block;background-color:#fafafa;padding:1em;font-size:10px;border:1px solid #d3d3d3;white-space:pre}.algorithm-text[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);height:300px}.override-annotation[_ngcontent-%COMP%]{font-style:italic;font-weight:300}"],changeDetection:0}),t})();function Ft(t,e){if(1&t&&(l.ynx(0),l._UZ(1,"app-algorithm-detail",2),l.ALo(2,"async"),l.BQk()),2&t){const t=e.ngIf,n=l.oxw();l.xp6(1),l.Q6J("algorithm",t)("status",l.lcZ(2,2,n.status$))}}let Ht=(()=>{class t{constructor(t,e){this.yamcs=e,this.status$=new U.X(null);const n=t.parent.snapshot.paramMap.get("qualifiedName");this.algorithm$=e.yamcsClient.getAlgorithm(this.yamcs.instance,n),this.yamcs.processor&&(this.algorithmStatusSubscription=e.yamcsClient.createAlgorithmStatusSubscription({instance:this.yamcs.instance,processor:this.yamcs.processor,name:n},t=>this.status$.next(t)))}ngOnDestroy(){this.algorithmStatusSubscription&&this.algorithmStatusSubscription.cancel()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(i.gz),l.Y36(c.C))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[1,"panel-content"],[4,"ngIf"],[3,"algorithm","status"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.YNc(1,Ft,3,4,"ng-container",1),l.ALo(2,"async"),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,1,e.algorithm$)))},directives:[g.O5,Vt],pipes:[g.Ov],encapsulation:2,changeDetection:0}),t})();var Rt=n(3357),jt=n(4626),Xt=n(7950),Kt=n(9979);function Gt(t,e){if(1&t){const t=l.EpF();l.ynx(0),l._UZ(1,"span",8),l.TgZ(2,"app-text-action",9),l.NdJ("click",function(){return l.CHM(t),l.oxw(4).switchToSection("runs")}),l._uU(3," Runs "),l.qZA(),l._uU(4," \xa0\xa0 "),l.TgZ(5,"app-text-action",10),l.NdJ("click",function(){return l.CHM(t),l.oxw(4).switchToSection("logs")}),l._uU(6," Logs "),l.qZA(),l.BQk()}if(2&t){const t=e.ngIf;l.xp6(2),l.Q6J("active","runs"===t),l.xp6(3),l.Q6J("active","logs"===t)}}function Wt(t,e){1&t&&(l.TgZ(0,"mat-icon",19),l._uU(1,"check_circle"),l.qZA())}function te(t,e){1&t&&(l.TgZ(0,"mat-icon",20),l._uU(1,"error"),l.qZA())}function ee(t,e){1&t&&l._UZ(0,"br")}const ne=function(t){return["/telemetry/parameters/",t]},ae=function(t){return{c:t}};function ie(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"a",21),l._uU(2),l.qZA(),l._uU(3),l.ALo(4,"value"),l.YNc(5,ee,1,0,"br",0),l.BQk()),2&t){const t=e.$implicit,n=e.last,a=l.oxw(8);l.xp6(1),l.Q6J("routerLink",l.VKq(7,ne,t.id.name))("queryParams",l.VKq(9,ae,a.yamcs.context)),l.xp6(1),l.hij(" ",t.id.name,""),l.xp6(1),l.hij(": ",l.lcZ(4,5,t.engValue)||"-"," "),l.xp6(2),l.Q6J("ngIf",!n)}}function se(t,e){1&t&&(l.ynx(0),l._uU(1,"-"),l.BQk())}function oe(t,e){1&t&&l._UZ(0,"br")}function re(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"a",21),l._uU(2),l.qZA(),l._uU(3),l.ALo(4,"value"),l.YNc(5,oe,1,0,"br",0),l.BQk()),2&t){const t=e.$implicit,n=e.last,a=l.oxw(8);l.xp6(1),l.Q6J("routerLink",l.VKq(7,ne,t.id.name))("queryParams",l.VKq(9,ae,a.yamcs.context)),l.xp6(1),l.hij(" ",t.id.name,""),l.xp6(1),l.hij(": ",l.lcZ(4,5,t.engValue)||"-"," "),l.xp6(2),l.Q6J("ngIf",!n)}}function ce(t,e){1&t&&(l.ynx(0),l._uU(1,"-"),l.BQk())}const le=function(){return[]};function ue(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td",13),l.YNc(2,Wt,2,0,"mat-icon",15),l.YNc(3,te,2,0,"mat-icon",16),l.qZA(),l.TgZ(4,"td",17),l._uU(5),l.ALo(6,"datetime"),l.qZA(),l.TgZ(7,"td",18),l.YNc(8,ie,6,11,"ng-container",14),l.YNc(9,se,2,0,"ng-container",0),l.qZA(),l.TgZ(10,"td",18),l.YNc(11,re,6,11,"ng-container",14),l.YNc(12,ce,2,0,"ng-container",0),l.qZA(),l.TgZ(13,"td",17),l._uU(14),l.ALo(15,"nvl"),l.qZA(),l.TgZ(16,"td",17),l._uU(17),l.qZA(),l.qZA()),2&t){const t=e.$implicit;l.xp6(2),l.Q6J("ngIf",!t.error),l.xp6(1),l.Q6J("ngIf",t.error),l.xp6(2),l.Oqu(l.lcZ(6,9,t.time)),l.xp6(3),l.Q6J("ngForOf",t.inputs||l.DdM(14,le)),l.xp6(1),l.Q6J("ngIf",!(null!=t.inputs&&t.inputs.length)),l.xp6(2),l.Q6J("ngForOf",t.outputs||l.DdM(15,le)),l.xp6(1),l.Q6J("ngIf",!(null!=t.outputs&&t.outputs.length)),l.xp6(2),l.Oqu(l.xi3(15,11,t.returnValue,"-")),l.xp6(3),l.Oqu(t.error||"-")}}function ge(t,e){if(1&t&&(l.TgZ(0,"table",12),l.TgZ(1,"tr"),l._UZ(2,"th",13),l.TgZ(3,"th"),l._uU(4,"Started"),l.qZA(),l.TgZ(5,"th"),l._uU(6,"Inputs"),l.qZA(),l.TgZ(7,"th"),l._uU(8,"Outputs"),l.qZA(),l.TgZ(9,"th"),l._uU(10,"Return value"),l.qZA(),l.TgZ(11,"th"),l._uU(12,"Error"),l.qZA(),l.qZA(),l.YNc(13,ue,18,16,"tr",14),l.qZA()),2&t){const t=l.oxw().ngIf;l.xp6(13),l.Q6J("ngForOf",t.runs)}}function he(t,e){if(1&t&&(l.ynx(0),l.YNc(1,ge,14,1,"table",11),l.BQk()),2&t){const t=e.ngIf;l.oxw(5);const n=l.MAs(5);l.xp6(1),l.Q6J("ngIf",null==t.runs?null:t.runs.length)("ngIfElse",n)}}function pe(t,e){if(1&t&&(l.ynx(0),l.YNc(1,he,2,2,"ng-container",3),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw(4),e=l.MAs(5);l.xp6(1),l.Q6J("ngIf",l.lcZ(2,2,t.trace$))("ngIfElse",e)}}function me(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td",24),l._uU(2),l.ALo(3,"datetime"),l.qZA(),l.TgZ(4,"td",25),l._uU(5),l.qZA(),l.qZA()),2&t){const t=e.$implicit;l.xp6(2),l.hij("[",l.lcZ(3,2,t.time),"]"),l.xp6(3),l.Oqu(t.msg)}}function de(t,e){if(1&t&&(l.TgZ(0,"table",23),l.YNc(1,me,6,4,"tr",14),l.qZA()),2&t){const t=l.oxw().ngIf;l.xp6(1),l.Q6J("ngForOf",t.logs)}}function fe(t,e){if(1&t&&(l.ynx(0),l.YNc(1,de,2,1,"table",22),l.BQk()),2&t){const t=e.ngIf;l.oxw(5);const n=l.MAs(5);l.xp6(1),l.Q6J("ngIf",null==t.logs?null:t.logs.length)("ngIfElse",n)}}function Ze(t,e){if(1&t&&(l.ynx(0),l.YNc(1,fe,2,2,"ng-container",3),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw(4),e=l.MAs(5);l.xp6(1),l.Q6J("ngIf",l.lcZ(2,2,t.trace$))("ngIfElse",e)}}function xe(t,e){if(1&t){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",4),l.TgZ(2,"div",5),l.TgZ(3,"button",6),l.NdJ("click",function(){return l.CHM(t),l.oxw(3).stopTrace()}),l._uU(4,"Stop trace"),l.qZA(),l._uU(5,"\xa0 "),l.TgZ(6,"button",6),l.NdJ("click",function(){return l.CHM(t),l.oxw(3).refreshData()}),l._uU(7,"Refresh"),l.qZA(),l._uU(8,"\xa0 "),l.YNc(9,Gt,7,2,"ng-container",0),l.ALo(10,"async"),l.qZA(),l.qZA(),l.TgZ(11,"div",7),l.YNc(12,pe,3,4,"ng-container",0),l.ALo(13,"async"),l.YNc(14,Ze,3,4,"ng-container",0),l.ALo(15,"async"),l.qZA(),l.BQk()}if(2&t){const t=l.oxw(3);l.xp6(9),l.Q6J("ngIf",l.lcZ(10,3,t.section$)),l.xp6(3),l.Q6J("ngIf","runs"===l.lcZ(13,5,t.section$)),l.xp6(2),l.Q6J("ngIf","logs"===l.lcZ(15,7,t.section$))}}function ye(t,e){if(1&t&&(l.ynx(0),l.YNc(1,xe,16,9,"ng-container",3),l.BQk()),2&t){const t=e.ngIf;l.oxw(2);const n=l.MAs(3);l.xp6(1),l.Q6J("ngIf",t.traceEnabled)("ngIfElse",n)}}function qe(t,e){if(1&t&&(l.ynx(0),l.YNc(1,ye,2,2,"ng-container",0),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",l.lcZ(2,1,t.status$))}}function Ae(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"app-empty-message",26),l.TgZ(1,"p"),l._uU(2," The trace tool captures runs, inputs, outputs and log messages of this algorithm. "),l.qZA(),l.TgZ(3,"p"),l.TgZ(4,"button",27),l.NdJ("click",function(){return l.CHM(t),l.oxw().startTrace()}),l._uU(5,"Start trace"),l.qZA(),l.qZA(),l.qZA()}}function Te(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"app-empty-message"),l.TgZ(1,"p"),l._uU(2," Tracing has started. "),l.qZA(),l.TgZ(3,"p"),l._uU(4," This page does "),l.TgZ(5,"strong"),l._uU(6,"not"),l.qZA(),l._uU(7," update automatically. "),l.qZA(),l.TgZ(8,"p"),l._uU(9," Hit refresh, or check back at a later time when you think there should be trace entries. "),l.qZA(),l.TgZ(10,"p"),l.TgZ(11,"button",27),l.NdJ("click",function(){return l.CHM(t),l.oxw().refreshData()}),l._uU(12,"Refresh"),l.qZA(),l.qZA(),l.qZA()}}const _e=[{path:"",canActivate:[o.a,s.z],canActivateChild:[o.a],runGuardsAndResolvers:"always",component:r.K,children:[{path:"",pathMatch:"full",component:st},{path:":qualifiedName",component:A,children:[{path:"",pathMatch:"full",redirectTo:"summary"},{path:"summary",component:Ht},{path:"trace",component:(()=>{class t{constructor(t,e,n,a,i){this.route=t,this.router=e,this.yamcs=n,this.messageService=i,this.status$=new U.X(null),this.trace$=new U.X(null),this.section$=new U.X("runs"),this.qualifiedName=t.parent.snapshot.paramMap.get("qualifiedName"),this.algorithm$=n.yamcsClient.getAlgorithm(this.yamcs.instance,this.qualifiedName),this.algorithm$.then(t=>{a.setTitle(t.name)}),this.refreshData()}ngAfterViewInit(){const t=this.route.snapshot.queryParamMap;t.has("section")&&this.switchToSection(t.get("section"))}switchToSection(t){this.section$.next(t),this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{section:t},queryParamsHandling:"merge"})}refreshData(){this.yamcs.processor?(this.yamcs.yamcsClient.getAlgorithmStatus(this.yamcs.instance,this.yamcs.processor,this.qualifiedName).then(t=>{this.status$.next(t)}).catch(t=>{this.messageService.showError(t)}),this.yamcs.yamcsClient.getAlgorithmTrace(this.yamcs.instance,this.yamcs.processor,this.qualifiedName).then(t=>{this.trace$.next(t)}).catch(t=>{this.messageService.showError(t)})):(this.status$.next(null),this.trace$.next(null))}startTrace(){const t=this.route.parent.snapshot.paramMap.get("qualifiedName");this.yamcs.yamcsClient.startAlgorithmTrace(this.yamcs.instance,this.yamcs.processor,t).then(()=>{this.refreshData()}).catch(t=>{this.messageService.showError(t)})}stopTrace(){const t=this.route.parent.snapshot.paramMap.get("qualifiedName");this.yamcs.yamcsClient.stopAlgorithmTrace(this.yamcs.instance,this.yamcs.processor,t).then(()=>{this.refreshData(),this.switchToSection("runs"),this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{section:null},queryParamsHandling:"merge"})}).catch(t=>{this.messageService.showError(t)})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(i.gz),l.Y36(i.F0),l.Y36(c.C),l.Y36(u.Dx),l.Y36(ct.e))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],decls:6,vars:3,consts:[[4,"ngIf"],["notrace",""],["empty",""],[4,"ngIf","ngIfElse"],[1,"extra-bar-container"],[1,"extra-bar"],[1,"ya-button",3,"click"],[1,"panel-content"],[1,"separator",2,"margin-left","10px","margin-right","10px"],["icon","directions_run",3,"active","click"],["icon","menu_book",3,"active","click"],["yaDataTable","",4,"ngIf","ngIfElse"],["yaDataTable",""],[1,"status"],[4,"ngFor","ngForOf"],["class","success",4,"ngIf"],["class","alert",4,"ngIf"],[2,"width","200px"],[2,"width","400px"],[1,"success"],[1,"alert"],[1,"secundary",3,"routerLink","queryParams"],["class","logs mono","style","width: 100%",4,"ngIf","ngIfElse"],[1,"logs","mono",2,"width","100%"],["width","1",1,"time",2,"white-space","nowrap"],[1,"msg",2,"white-space","pre"],["headerTitle","Trace"],[1,"ya-button","primary",3,"click"]],template:function(t,e){1&t&&(l.YNc(0,qe,3,3,"ng-container",0),l.ALo(1,"async"),l.YNc(2,Ae,6,0,"ng-template",null,1,l.W1O),l.YNc(4,Te,13,0,"ng-template",null,2,l.W1O)),2&t&&l.Q6J("ngIf",l.lcZ(1,1,e.algorithm$))},directives:[g.O5,Rt.l,ut.O,g.sg,O.Hw,i.yS,jt.M],pipes:[g.Ov,xt.i,Xt.m,Kt.V],styles:[".extra-bar-container[_ngcontent-%COMP%]{padding:12px;border-bottom:1.1px solid rgba(0,0,0,.08)}.extra-bar[_ngcontent-%COMP%]{height:24px;line-height:24px}.separator[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.12)}table.logs[_ngcontent-%COMP%]{line-height:12px}table.logs[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;color:rgba(0,0,0,.65)}table.logs[_ngcontent-%COMP%]   td.time[_ngcontent-%COMP%]{color:rgba(0,0,0,.35)}"],changeDetection:0}),t})()}]}]}];let we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.Bz.forChild(_e)],i.Bz]}),t})(),Ue=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.m,we]]}),t})()}}]);